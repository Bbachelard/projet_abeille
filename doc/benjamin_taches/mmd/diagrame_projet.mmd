---
config:
  theme: redux-dark
  layout: dagre
  look: classic
  class:
    hideEmptyMembersBox: false
---
classDiagram
direction LR
    class ProgrammeArduino {
	    -collecteDonnées()
	    -envoyerDonneesTTN()
    }
    class TTN {SS
	    -brokerMQTT
	    -transfertDonnees()
    }
    class QtApplication {
	    +Interface QML
	    -dataManager
	    -MqttHandler
	    -configurateurRuche
	    -gestionDonnéesRuches()
	    -affichageGraphiques()
	    -gestionUtilisateurs()
	    -gestionAlertes()
    }
    class RaspberryPi {
	    +LoRaWAN Gateway
	    +SQLite(BDD)
	    +Apache(Serveur Web)
    }
    class SiteWeb {
	    +visualisationDonnées()
	    +générationRapports()
	    +interface administrateur()
    }
    class Scripts {
	    +notif.py(envoi emails d'alerte)
	    +syncImages.py(synchronisation images)
	    +deleteImages.py(nettoyage /var/www/html/images)
    }
    class BaseDeDonnees {
	    +Ruches
	    +Mesures
	    +Capteurs
	    +Images
	    +Utilisateurs
	    +Alertes
    }
    class RuchePhysique {
	    +MKR(données réelles)
	    +Portenta H7(données et images)
	}

    RuchePhysique --> ProgrammeArduino : exécute
    ProgrammeArduino --> TTN : envoie données
    TTN --> QtApplication : communique via MQTT
    QtApplication --> RaspberryPi : accède
    QtApplication --> BaseDeDonnees : lit/écrit
    RaspberryPi --> BaseDeDonnees : contient
    RaspberryPi --> SiteWeb : héberge
    RaspberryPi --> Scripts : exécute
    Scripts --> BaseDeDonnees : interroge/modifie
    SiteWeb --> BaseDeDonnees : utilise

	class ProgrammeArduino:::Sky
	class TTN:::Sky
	class QtApplication:::Peach
	class RaspberryPi:::Rose
	class SiteWeb:::Pine
	class Scripts:::Peach
	class BaseDeDonnees:::Ash
	class RuchePhysique:::Aqua
	class RuchePhysique:::Sky

	classDef Aqua :, stroke-width:1px, stroke-dasharray:none, stroke:#46EDC8, fill:#DEFFF8, color:#378E7A
	classDef Sky :, stroke-width:1px, stroke-dasharray:none, stroke:#374D7C, fill:#E2EBFF, color:#374D7C
	classDef Rose :, stroke-width:1px, stroke-dasharray:none, stroke:#FF5978, fill:#FFDFE5, color:#8E2236
	classDef Pine :, stroke-width:1px, stroke-dasharray:none, stroke:#254336, fill:#27654A, color:#FFFFFF
	classDef Peach :, stroke-width:1px, stroke-dasharray:none, stroke:#FBB35A, fill:#FFEFDB, color:#8F632D
	classDef Ash :,stroke-width:1px, stroke-dasharray:none, stroke:#999999, fill:#EEEEEE, color:#000000